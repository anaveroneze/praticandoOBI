{% extends 'base.html' %}
{% load static %}

{% block container %}
<link href="{% static 'admin/css/breadcrumb.css' %}" rel="stylesheet">

<br class="list-group">

<ul class="breadcrumb">
    <li class="completed"><a href="{% url 'usuarios_obi:provaperson' %}">Dados da Prova</a></li>
    <li class="completed"><a href="{% url 'usuarios_obi:provaperson_edit' codprova %}">Editar Prova</a></li>
    <li class="completed"><a href="{% url 'usuarios_obi:questoes_busca' codprova %}">Buscar Questões</a></li>
    <li class="active"><a href="">Adicionar Questões</a></li>
    <li><a href="javascript:void(0);">Imprimir Prova</a></li>
</ul>

<form method="POST" class="post-form">{% csrf_token %}
    {% for prob in problemas %}
    <a class="list-group-item">
        <div class="checkbox pull-left">
            <label><input type="checkbox" name="checks" value="">  Selecionar todos </label>
        </div>

        <div class="pull-left form-control-inline">
            <h3 class="list-group-item-heading">{{ prob.numeroproblema }} - {{prob.tituloproblema}}</h3>
            <h4>Classificação:</h4>
            <!--Mostra a classificação do problema, se ele tiver-->
            <h5>{% for f in prob.classificacao.all %}
                    {{f.tituloclassificacao}}<br>
                {% endfor %}</h5>
            <br/>{{prob.enunciadoproblema}}</br>

            <!--Mostra as regras do problema, se ele tiver-->
            {% if prob.regrasproblema %}
                <br>{{prob.regrasproblema}}<br>
            {% endif %}

            <!--Mostra as imagens do problema, se ele tiver-->
            {% if prob.imgproblema %}
                {% load static %}
                <img src={% static prob.imgproblema %} width="200" height="200" alt="My image">
            {% endif %}

        <!--Mostra as questões do problema-->
        {% for q in questoes %}
            {% if q.codproblema.codproblema == prob.codproblema %}
            <a class="list-group-item">
                <div class="checkbox pull-left">
                    <label>
                        <input type="checkbox" name="checks" value="{{q.codquestao}}">
                    </label>
                </div>

                <div class="pull-left form-control-inline">
                    <h4 class="list-group-item-heading">{{ q.numeroquestao }} - {{q.enunciadoquestao}}</h4>
                    <p class="list-group-item-text">
                         <!--Mostra as imagens da questão-->
                        {% if q.imgquestao %}
                            {% load static %}
                            <img src={% static q.imgquestao %} width="200" height="200" alt="Img"></br>
                        {% endif %}

                        <!--Mostra as alternativas da questão-->
                        {% for a in alternativas %}
                            {% if a.codquestao.codquestao == q.codquestao %}
                                {{a.letraalternativa}} - {{a.textoalternativa}}</br>
                            {% endif %}
                        {% endfor %}
                    </p>
                </div><div class="clearfix"></div>
            </a>

        {% endif %}
        {% endfor %}
        <br class="pull-left form-control-inline"></br>
        </div>
    </a>
    {% endfor%}

    <div class="pull-left form-control-inline">
        <h4 class="list-group-item-heading">
            <button type="submit" class="btn btn-primary">Adicionar Questões</button>
            <a href="{% url 'usuarios_obi:provaperson_edit' codprova %}" class="btn btn-outline-secondary" role="button" >Cancelar</a>
        </h4>
    </div>
</form>

{% endblock %}